spring.application.name=uber-traffic-optimization

# Server Configuration
server.port=8080
server.servlet.context-path=/api/v1

# Database Configuration
spring.neo4j.uri=bolt://localhost:7687
spring.neo4j.authentication.username=neo4j
spring.neo4j.authentication.password=password
spring.neo4j.database=uber_traffic

# Redis Configuration
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
spring.redis.timeout=2000ms
spring.redis.lettuce.pool.max-active=8
spring.redis.lettuce.pool.max-idle=8
spring.redis.lettuce.pool.min-idle=0

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=traffic-optimization-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer

# Topics
app.kafka.topic.traffic-data=traffic-data
app.kafka.topic.gps-data=gps-data
app.kafka.topic.route-requests=route-requests
app.kafka.topic.route-updates=route-updates

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# Logging Configuration
logging.level.com.uber.traffic=DEBUG
logging.level.org.springframework.data.neo4j=DEBUG
logging.level.org.springframework.kafka=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Performance Configuration
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=300000
spring.cache.cache-names=route-cache,traffic-cache,prediction-cache

# External API Configuration
app.external.tomtom.api-key=${TOMTOM_API_KEY:your-tomtom-api-key}
app.external.weather.api-key=${WEATHER_API_KEY:your-weather-api-key}
app.external.google.api-key=${GOOGLE_API_KEY:your-google-api-key}

# Route Calculation Configuration
app.route.max-search-radius=50.0
app.route.max-alternatives=5
app.route.cache-ttl=300
app.route.max-computation-time=5000

# Traffic Prediction Configuration
app.prediction.enabled=true
app.prediction.model-update-interval=3600000
app.prediction.horizon-minutes=90

# Security Configuration
spring.security.oauth2.resourceserver.jwt.issuer-uri=${OAUTH_ISSUER_URI:http://localhost:8080/auth/realms/uber}
app.security.api-key=${API_KEY:dev-api-key}

# Profile-specific Configuration
---
spring.config.activate.profile=dev

# Development Database
spring.neo4j.uri=bolt://localhost:7687
spring.neo4j.authentication.username=neo4j
spring.neo4j.authentication.password=devpassword

# Development Redis
spring.redis.host=localhost
spring.redis.port=6379

# Development Kafka
spring.kafka.bootstrap-servers=localhost:9092

---
spring.config.activate.profile=prod

# Production Database (use environment variables)
spring.neo4j.uri=${NEO4J_URI:bolt://neo4j:7687}
spring.neo4j.authentication.username=${NEO4J_USERNAME:neo4j}
spring.neo4j.authentication.password=${NEO4J_PASSWORD:password}

# Production Redis
spring.redis.host=${REDIS_HOST:redis}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}

# Production Kafka
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:kafka:9092}
